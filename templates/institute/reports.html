{% extends "institute/base.html" %}

{% block title %}LearnieVerse - Reports{% endblock %}
{% block right_panel %}{% endblock %}

{% block content %}
<div class="institute-info">
  <h1>{{ institute.institution_name }}</h1>
  <h2>Reports</h2>
</div>

<div class="cards-container">
  <div class="students-info-container">
    <div class="search-header" style="display: flex; justify-content: space-between; align-items: center;">
      <h3>Reports Overview</h3>
    </div>

    <table class="students-table">
      <thead>
        <tr>
          <th>Student</th>
          <th>Teacher</th>
          <th>Class</th>
          <th>Academic Year</th>
          <th>Attendance %</th>
          <th>Total %</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        {% for rpt in reports %}
        <tr>
          <td>{{ rpt.student_name }}</td>
          <td>{{ rpt.teacher_name }}</td>
          <td>{{ rpt.class_name }}</td>
          <td>{{ rpt.academic_year }}</td>
          <td>{{ '%.1f' % rpt.attendance_pct if rpt.attendance_pct is not none else 'N/A' }}%</td>
          <td>{{ '%.1f' % rpt.total_percentage if rpt.total_percentage is not none else 'N/A' }}%</td>
          <td>{{ rpt.report_date.strftime('%d/%m/%Y') }}</td>
        </tr>
        {% else %}
        <tr>
          <td colspan="8" style="text-align:center;">No reports found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
